import{a as C}from"./chunk-34JBJECI.js";import{a as I,b as D,e as T,j}from"./chunk-SMG6H2SE.js";import{n as P,o as W}from"./chunk-S2FDXCC5.js";import{d as E}from"./chunk-RI2NYNHK.js";import"./chunk-FPPZ4BUR.js";import{Cb as l,Db as d,Ea as b,Eb as c,Fb as v,Gb as y,Hb as M,Ib as k,La as _,Nb as S,Ob as O,S as x,W as w,cb as p,db as m,jb as a,kb as r,sb as f,ub as g,za as i}from"./chunk-QCNNDH25.js";var h=class n{constructor(t){this.http=t}apiUrl="https://api.openweathermap.org/data/2.5";getWeather(t){return this.http.get(`${this.apiUrl}/weather`,{params:{q:t,appid:C.weatherapiKey,units:"metric",lang:"sv"}})}getWeatherByCoords(t,e){return this.http.get(`${this.apiUrl}/weather`,{params:{lat:t,lon:e,appid:C.weatherapiKey,units:"metric",lang:"sv"}})}static \u0275fac=function(e){return new(e||n)(w(E))};static \u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"})};function z(n,t){n&1&&(a(0,"p"),l(1,"H\xE4mtar v\xE4der\u2026"),r())}function F(n,t){if(n&1&&(a(0,"div")(1,"h3"),l(2),r(),a(3,"p"),l(4),S(5,"titlecase"),r(),a(6,"p"),l(7),r(),a(8,"small"),l(9),r(),a(10,"p"),l(11),r(),a(12,"p"),l(13),r()()),n&2){let e=g();i(2),d(e.weather.name),i(2),d(O(5,7,e.weather.weather[0].description)),i(3),c("\u{1F321}\uFE0F ",e.weather.main.temp," \xB0C"),i(2),v(" Min: ",e.weather.main.temp_min," \xB0C | Max: ",e.weather.main.temp_max," \xB0C "),i(2),c("\u{1F4A7} Luftfuktighet: ",e.weather.main.humidity," %"),i(2),c("\u{1F4A8} Vind: ",e.weather.wind.speed," m/s")}}function K(n,t){}function N(n,t){if(n&1&&(a(0,"p",3),l(1),r()),n&2){let e=g();i(),d(e.error)}}var B=class n{constructor(t){this.api=t}city="";weather=null;error="";loading=!1;manualMode=!1;ngOnInit(){this.loadByGeolocation()}loadByGeolocation(){if(!("geolocation"in navigator)){this.error="Din webbl\xE4sare st\xF6der inte platstj\xE4nster. S\xF6k p\xE5 en stad ist\xE4llet.";return}this.manualMode||(this.loading=!0,this.error="",navigator.geolocation.getCurrentPosition(t=>{let{latitude:e,longitude:o}=t.coords;this.api.getWeatherByCoords(e,o).subscribe({next:s=>{this.weather=s,this.city=s?.name??"",this.loading=!1},error:()=>{this.error="Kunde inte h\xE4mta v\xE4der f\xF6r din plats.",this.weather=null,this.loading=!1}})},t=>{this.error="Kunde inte f\xE5 \xE5tkomst till din plats. Till\xE5t platstj\xE4nster eller s\xF6k p\xE5 en stad.",this.loading=!1},{enableHighAccuracy:!0,timeout:8e3,maximumAge:6e4}))}search(){if(!this.city.trim()){this.error="Ange en stad.",this.weather=null;return}this.api.getWeather(this.city.trim()).subscribe({next:t=>{this.weather=t,this.error=""},error:t=>{this.error="Kunde inte h\xE4mta v\xE4derdata. Kontrollera stadens namn.",this.weather=null}})}static \u0275fac=function(e){return new(e||n)(b(h))};static \u0275cmp=_({type:n,selectors:[["app-weather"]],decls:9,vars:4,consts:[[1,"weather-container"],["placeholder","Skriv stadens namn",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],[1,"error"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div")(2,"input",1),k("ngModelChange",function(u){return M(o.city,u)||(o.city=u),u}),f("keyup.enter",function(){return o.search()}),r(),a(3,"button",2),f("click",function(){return o.search()}),l(4,"H\xE4mta v\xE4der"),r()(),p(5,z,2,0,"p"),p(6,F,14,9,"div")(7,K,0,0),p(8,N,2,1,"p",3),r()),e&2&&(i(2),y("ngModel",o.city),i(3),m(o.loading?5:-1),i(),m(o.weather?6:7),i(2),m(o.error?8:-1))},dependencies:[W,j,I,D,T,P],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:100vh;background:linear-gradient(to top,#87ceeb,#fff);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;padding:2rem;box-sizing:border-box}.weather-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 24px #0000001a;padding:24px;max-width:400px;width:100%;text-align:center}.weather-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:#333}.weather-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0;font-size:1rem;color:#444}.weather-container[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:.85rem;color:#666}input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:8px;font-size:1rem;margin-bottom:12px;width:calc(100% - 24px);outline:none;transition:border .2s}input[_ngcontent-%COMP%]:focus{border:1px solid #0077ff}button[_ngcontent-%COMP%]{background:#07f;color:#fff;border:none;border-radius:8px;padding:10px 16px;font-size:1rem;cursor:pointer;transition:background .2s;margin-left:8px}button[_ngcontent-%COMP%]:hover{background:#005fcc}.error[_ngcontent-%COMP%]{margin-top:12px;color:#b00020;font-weight:700}"]})};export{B as weatherComponent};
