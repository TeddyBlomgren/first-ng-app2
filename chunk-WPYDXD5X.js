import{a as L}from"./chunk-34JBJECI.js";import{b as H,c as B,d as V,e as K,f as $,g as G,h as R,i as U,j as W}from"./chunk-TUOQGTFP.js";import{a as A,b as j}from"./chunk-GGDBFXKT.js";import{i as D,j as F,k as N,l as z}from"./chunk-HBUUU6IZ.js";import"./chunk-FPPZ4BUR.js";import{Bb as C,Cb as b,Fa as P,Ka as m,O as y,S as v,Y as M,Z as S,bb as s,cb as r,db as a,ib as w,jb as x,lb as d,sb as c,tb as g,ua as o,ub as k,wb as I,xb as E,yb as T,za as O}from"./chunk-JZR4J7BB.js";var _=class n{constructor(e){this.http=e}apiUrl="https://api.api-ninjas.com/v1/sudokugenerate";headers=new A({"X-Api-Key":L.sudokuApiKey});getSudoku(e="easy"){return this.http.get(`${this.apiUrl}?difficulty=${e}`,{headers:this.headers})}static \u0275fac=function(t){return new(t||n)(v(j))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};function J(n,e){if(n&1&&(r(0,"option",10),c(1),C(2,"titlecase"),a()),n&2){let t=e.$implicit;s("value",t),o(),g(b(2,2,t))}}function Q(n,e){if(n&1&&(r(0,"div",11)(1,"span"),c(2,"Difficulty:"),a(),r(3,"strong"),c(4),C(5,"titlecase"),a()()),n&2){let t=d();o(4),g(b(5,1,t.sudoku.difficulty??t.selectedDifficulty))}}function Z(n,e){if(n&1&&(r(0,"p",12),c(1),a()),n&2){let t=d();o(),g(t.error)}}function tt(n,e){if(n&1&&(r(0,"span",18),c(1),a()),n&2){let t=d().$implicit;o(),g(t)}}function et(n,e){if(n&1){let t=w();r(0,"input",19),x("input",function(l){M(t);let u=d().index,f=d().index,p=d(2);return S(p.onCellInput(f,u,l.target.value))}),a()}if(n&2){let t=d().$implicit,i=d(3);s("value",i.cellText(t))}}function nt(n,e){if(n&1&&(r(0,"td"),m(1,tt,2,1,"span",16)(2,et,1,1,"input",17),a()),n&2){let t=e.index,i=d().index,l=d(2);o(),s("ngIf",l.givenMask[i][t]),o(),s("ngIf",!l.givenMask[i][t])}}function it(n,e){if(n&1&&(r(0,"tr"),m(1,nt,3,2,"td",15),a()),n&2){let t=e.$implicit,i=d(2);o(),s("ngForOf",t)("ngForTrackBy",i.trackCol)}}function ot(n,e){if(n&1&&(r(0,"div",13)(1,"table",14)(2,"tbody"),m(3,it,2,2,"tr",15),a()()()),n&2){let t=e.ngIf,i=d();o(3),s("ngForOf",t.grid)("ngForTrackBy",i.trackRow)}}function rt(n,e){if(n&1&&(r(0,"p",20),c(1),a()),n&2){let t=d();o(),k("Fel: ",t.mistakes)}}var X=class n{constructor(e){this.sudokuService=e}difficulties=["easy","medium","hard","random"];selectedDifficulty="easy";sudoku;givenMask=[];mistakes=0;loading=!1;error="";resolveDifficulty(e){if(e!=="random")return e;let t=["easy","medium","hard"];return t[Math.floor(Math.random()*t.length)]}buildGivenMask(e){this.givenMask=e.map(t=>t.map(i=>i!==0))}load(){let e=this.resolveDifficulty(this.selectedDifficulty);this.loading=!0,this.error="",this.sudoku=void 0,this.sudokuService.getSudoku(e).subscribe({next:t=>{let i=t?.puzzle,l=t?.solution;if(!(Array.isArray(i)&&i.length===9&&i.every(p=>Array.isArray(p)&&p.length===9))){this.error="Felaktigt Sudokuformat fr\xE5n API.",this.loading=!1;return}let f=i.map(p=>p.map(h=>h??0));this.sudoku={grid:f,solution:l,difficulty:e},this.buildGivenMask(f),this.mistakes=0,this.loading=!1},error:t=>{console.error("Kunde inte h\xE4mta Sudoku:",t),this.error="Kunde inte h\xE4mta Sudoku.",this.loading=!1}})}cellText(e){return e===0?"":String(e)}onCellInput(e,t,i){if(!this.sudoku||this.givenMask[e][t])return;let l=i.trim();if(l===""){this.sudoku.grid[e][t]=0;return}let u=Number(l);!Number.isInteger(u)||u<1||u>9||(this.sudoku.grid[e][t]=u,this.sudoku.solution&&(this.sudoku.solution[e][t]===u||this.mistakes++))}trackRow=(e,t)=>e;trackCol=(e,t)=>e;static \u0275fac=function(t){return new(t||n)(O(_))};static \u0275cmp=P({type:n,selectors:[["app-sudoku"]],decls:13,vars:8,consts:[[1,"sudoku-card"],[1,"toolbar",3,"ngSubmit"],[1,"control"],["name","difficulty",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],["class","meta",4,"ngIf"],["class","error",4,"ngIf"],["class","board-wrap",4,"ngIf"],["class","mistakes",4,"ngIf"],[3,"value"],[1,"meta"],[1,"error"],[1,"board-wrap"],["aria-label","Sudokobr\xE4de",1,"sudoku"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cell given",4,"ngIf"],["class","cell editable","type","text","maxlength","1","inputmode","numeric","autocomplete","off",3,"value","input",4,"ngIf"],[1,"cell","given"],["type","text","maxlength","1","inputmode","numeric","autocomplete","off",1,"cell","editable",3,"input","value"],[1,"mistakes"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"form",1),x("ngSubmit",function(){return i.load()}),r(2,"label",2)(3,"span"),c(4,"Sv\xE5righetsgrad"),a(),r(5,"select",3),T("ngModelChange",function(u){return E(i.selectedDifficulty,u)||(i.selectedDifficulty=u),u}),m(6,J,3,4,"option",4),a()(),r(7,"button",5),c(8),a()(),m(9,Q,6,3,"div",6)(10,Z,2,1,"p",7)(11,ot,4,2,"div",8)(12,rt,2,1,"p",9),a()),t&2&&(o(5),I("ngModel",i.selectedDifficulty),o(),s("ngForOf",i.difficulties),o(),s("disabled",i.loading),o(),k(" ",i.loading?"H\xE4mtar\u2026":"H\xE4mta Sudoku"," "),o(),s("ngIf",i.sudoku),o(),s("ngIf",i.error),o(),s("ngIf",i.sudoku),o(),s("ngIf",i.mistakes>0))},dependencies:[z,D,F,W,$,R,U,G,H,B,K,V,N],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}.sudoku-card[_ngcontent-%COMP%]{max-width:560px;margin:16px auto;padding:16px 16px 20px;background:#fff;border-radius:16px;border:1px solid #e7e7e7;box-shadow:0 8px 28px #0000000f;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:12px}.control[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}.control[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#444;font-size:14px}select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #cfcfcf;border-radius:10px;background:#fff;font-size:14px}button[type=submit][_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:8px 12px;border-radius:10px;border:1px solid #3761ea;background:#4c7df8;color:#fff;font-weight:600;cursor:pointer;transition:transform .05s ease,filter .15s ease,background .15s ease}button[_ngcontent-%COMP%]:hover{filter:brightness(1.02)}button[_ngcontent-%COMP%]:active{transform:translateY(1px)}button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.meta[_ngcontent-%COMP%]{display:flex;gap:6px;justify-content:center;margin-bottom:6px;color:#555;font-size:14px}.meta[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#222}.error[_ngcontent-%COMP%]{color:#b00020;text-align:center;margin:4px 0 8px}.board-wrap[_ngcontent-%COMP%]{display:grid;place-items:center}.sudoku[_ngcontent-%COMP%]{border-collapse:collapse;border:3px solid #222;background:#fff;-webkit-user-select:none;user-select:none}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:48px;height:48px;border:1px solid #cfcfcf;text-align:center;vertical-align:middle;position:relative;padding:0}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3n){border-right:3px solid #222}.sudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3n)   td[_ngcontent-%COMP%]{border-bottom:3px solid #222}.sudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{border-top:3px solid #222}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:3px solid #222}.sudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:3px solid #222}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:3px solid #222}.given[_ngcontent-%COMP%]{display:grid;place-items:center;width:100%;height:100%;font-weight:700;font-size:18px;color:#222;background:#f8f8f8}.sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;border:none;outline:none;text-align:center;font-size:18px;font-weight:600;background:#fff}.sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background:#f4f8ff}.sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#eef4ff;box-shadow:inset 0 0 0 2px #4c7df8;border-radius:2px}@media (max-width: 480px){.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:40px;height:40px}.given[_ngcontent-%COMP%], .sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}}"]})};export{X as SudokuComponent};
