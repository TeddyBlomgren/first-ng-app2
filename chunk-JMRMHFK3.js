import{a as q}from"./chunk-34JBJECI.js";import{b as B,c as K,d as G,e as R,f as U,g as W,h as L,i as X,j as Y}from"./chunk-SMG6H2SE.js";import{n as A,o as j}from"./chunk-S2FDXCC5.js";import{a as H,d as V}from"./chunk-RI2NYNHK.js";import"./chunk-FPPZ4BUR.js";import{Cb as s,Db as g,Ea as I,Eb as M,Gb as N,Hb as $,Ib as z,La as D,Nb as v,Ob as y,S as O,W as P,aa as w,ba as E,bb as b,cb as c,db as p,fb as T,gb as _,hb as x,ib as C,jb as r,kb as a,qb as F,sb as h,ub as u,za as o}from"./chunk-QCNNDH25.js";var k=class n{constructor(e){this.http=e}apiUrl="https://api.api-ninjas.com/v1/sudokugenerate";headers=new H({"X-Api-Key":q.sudokuApiKey});getSudoku(e="easy"){return this.http.get(`${this.apiUrl}?difficulty=${e}`,{headers:this.headers})}static \u0275fac=function(t){return new(t||n)(P(V))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function tt(n,e){if(n&1&&(r(0,"option",4),s(1),v(2,"titlecase"),a()),n&2){let t=e.$implicit;C("value",t),o(),g(y(2,2,t))}}function et(n,e){if(n&1&&(r(0,"div",6)(1,"span"),s(2,"Difficulty:"),a(),r(3,"strong"),s(4),v(5,"titlecase"),a()()),n&2){let t=u();o(4),g(y(5,1,t.sudoku.difficulty??t.selectedDifficulty))}}function nt(n,e){if(n&1&&(r(0,"p",7),s(1),a()),n&2){let t=u();o(),g(t.error)}}function it(n,e){if(n&1&&(r(0,"span",11),s(1),a()),n&2){let t=u().$implicit;o(),g(t)}}function ot(n,e){if(n&1){let t=F();r(0,"input",13),h("input",function(d){w(t);let l=u().$index,f=u().$index,m=u(2);return E(m.onCellInput(f,l,d.target.value))}),a()}if(n&2){let t=u().$implicit,i=u(3);C("value",i.cellText(t))}}function rt(n,e){if(n&1&&(r(0,"td"),c(1,it,2,1,"span",11),c(2,ot,1,1,"input",12),a()),n&2){let t=e.$index,i=u().$index,d=u(2);o(),p(d.givenMask[i][t]?1:-1),o(),p(d.givenMask[i][t]?-1:2)}}function at(n,e){if(n&1&&(r(0,"tr"),_(1,rt,3,2,"td",null,b().trackCol,!0),a()),n&2){let t=e.$implicit;o(),x(t)}}function dt(n,e){n&1&&(r(0,"div",8)(1,"table",10)(2,"tbody"),_(3,at,3,0,"tr",null,b().trackRow,!0),a()()()),n&2&&(o(3),x(e.grid))}function lt(n,e){if(n&1&&(r(0,"p",9),s(1),a()),n&2){let t=u();o(),M("Fel: ",t.mistakes)}}var J=class n{constructor(e){this.sudokuService=e}difficulties=["easy","medium","hard","random"];selectedDifficulty="easy";sudoku;givenMask=[];mistakes=0;loading=!1;error="";resolveDifficulty(e){if(e!=="random")return e;let t=["easy","medium","hard"];return t[Math.floor(Math.random()*t.length)]}buildGivenMask(e){this.givenMask=e.map(t=>t.map(i=>i!==0))}load(){let e=this.resolveDifficulty(this.selectedDifficulty);this.loading=!0,this.error="",this.sudoku=void 0,this.sudokuService.getSudoku(e).subscribe({next:t=>{let i=t?.puzzle,d=t?.solution;if(!(Array.isArray(i)&&i.length===9&&i.every(m=>Array.isArray(m)&&m.length===9))){this.error="Felaktigt Sudokuformat fr\xE5n API.",this.loading=!1;return}let f=i.map(m=>m.map(S=>S??0));this.sudoku={grid:f,solution:d,difficulty:e},this.buildGivenMask(f),this.mistakes=0,this.loading=!1},error:t=>{console.error("Kunde inte h\xE4mta Sudoku:",t),this.error="Kunde inte h\xE4mta Sudoku.",this.loading=!1}})}cellText(e){return e===0?"":String(e)}onCellInput(e,t,i){if(!this.sudoku||this.givenMask[e][t])return;let d=i.trim();if(d===""){this.sudoku.grid[e][t]=0;return}let l=Number(d);!Number.isInteger(l)||l<1||l>9||(this.sudoku.grid[e][t]=l,this.sudoku.solution&&(this.sudoku.solution[e][t]===l||this.mistakes++))}trackRow=(e,t)=>e;trackCol=(e,t)=>e;static \u0275fac=function(t){return new(t||n)(I(k))};static \u0275cmp=D({type:n,selectors:[["app-sudoku"]],decls:14,vars:7,consts:[[1,"sudoku-card"],[1,"toolbar",3,"ngSubmit"],[1,"control"],["name","difficulty",3,"ngModelChange","ngModel"],[3,"value"],["type","submit",3,"disabled"],[1,"meta"],[1,"error"],[1,"board-wrap"],[1,"mistakes"],["aria-label","Sudokobr\xE4de",1,"sudoku"],[1,"cell","given"],["type","text","maxlength","1","inputmode","numeric","autocomplete","off",1,"cell","editable",3,"value"],["type","text","maxlength","1","inputmode","numeric","autocomplete","off",1,"cell","editable",3,"input","value"]],template:function(t,i){if(t&1&&(r(0,"div",0)(1,"form",1),h("ngSubmit",function(){return i.load()}),r(2,"label",2)(3,"span"),s(4,"Sv\xE5righetsgrad"),a(),r(5,"select",3),z("ngModelChange",function(l){return $(i.selectedDifficulty,l)||(i.selectedDifficulty=l),l}),_(6,tt,3,4,"option",4,T),a()(),r(8,"button",5),s(9),a()(),c(10,et,6,3,"div",6),c(11,nt,2,1,"p",7),c(12,dt,5,0,"div",8),c(13,lt,2,1,"p",9),a()),t&2){let d;o(5),N("ngModel",i.selectedDifficulty),o(),x(i.difficulties),o(2),C("disabled",i.loading),o(),M(" ",i.loading?"H\xE4mtar\u2026":"H\xE4mta Sudoku"," "),o(),p(i.sudoku?10:-1),o(),p(i.error?11:-1),o(),p((d=i.sudoku)?12:-1,d),o(),p(i.mistakes>0?13:-1)}},dependencies:[j,Y,U,L,X,W,B,K,R,G,A],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}.sudoku-card[_ngcontent-%COMP%]{max-width:560px;margin:16px auto;padding:16px 16px 20px;background:#fff;border-radius:16px;border:1px solid #e7e7e7;box-shadow:0 8px 28px #0000000f;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:12px}.control[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}.control[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#444;font-size:14px}select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #cfcfcf;border-radius:10px;background:#fff;font-size:14px}button[type=submit][_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:8px 12px;border-radius:10px;border:1px solid #3761ea;background:#4c7df8;color:#fff;font-weight:600;cursor:pointer;transition:transform .05s ease,filter .15s ease,background .15s ease}button[_ngcontent-%COMP%]:hover{filter:brightness(1.02)}button[_ngcontent-%COMP%]:active{transform:translateY(1px)}button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.meta[_ngcontent-%COMP%]{display:flex;gap:6px;justify-content:center;margin-bottom:6px;color:#555;font-size:14px}.meta[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#222}.error[_ngcontent-%COMP%]{color:#b00020;text-align:center;margin:4px 0 8px}.board-wrap[_ngcontent-%COMP%]{display:grid;place-items:center}.sudoku[_ngcontent-%COMP%]{border-collapse:collapse;border:3px solid #222;background:#fff;-webkit-user-select:none;user-select:none}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:48px;height:48px;border:1px solid #cfcfcf;text-align:center;vertical-align:middle;position:relative;padding:0}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3n){border-right:3px solid #222}.sudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3n)   td[_ngcontent-%COMP%]{border-bottom:3px solid #222}.sudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{border-top:3px solid #222}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:3px solid #222}.sudoku[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:3px solid #222}.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:3px solid #222}.given[_ngcontent-%COMP%]{display:grid;place-items:center;width:100%;height:100%;font-weight:700;font-size:18px;color:#222;background:#f8f8f8}.sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;border:none;outline:none;text-align:center;font-size:18px;font-weight:600;background:#fff}.sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background:#f4f8ff}.sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#eef4ff;box-shadow:inset 0 0 0 2px #4c7df8;border-radius:2px}@media (max-width: 480px){.sudoku[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:40px;height:40px}.given[_ngcontent-%COMP%], .sudoku[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}}"]})};export{J as SudokuComponent};
