import{i as V,j as N,l as D}from"./chunk-GYORGMM7.js";import"./chunk-FPPZ4BUR.js";import{Bb as T,Fa as A,Gb as y,Ka as p,O as R,T as P,Ua as M,Va as k,Y as b,Z as w,bb as c,cb as o,db as i,eb as S,kb as x,lb as h,nb as s,sb as C,tb as E,ua as u,ub as d,wb as I,za as O}from"./chunk-A7UPANQH.js";var m=class t{game={board:[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],currentPlayer:"R",winner:null};playerNames={R:"Spelare 1",Y:"Spelare 2"};dropDisc(e){if(this.game.winner||e<0||e>=this.game.board[0].length)return!1;for(let n=this.game.board.length-1;n>=0;n--)if(this.game.board[n][e]===null)return this.game.board[n][e]=this.game.currentPlayer,this.checkWinner(n,e),this.game.winner||(this.game.currentPlayer=this.game.currentPlayer==="R"?"Y":"R"),!0;return!1}checkWinner(e,n){let r=[{dr:0,dc:1},{dr:1,dc:0},{dr:1,dc:1},{dr:1,dc:-1}],l=this.game.board[e][n];if(l)for(let{dr:a,dc:F}of r){let v=1;for(let f of[-1,1]){let g=e+a*f,_=n+F*f;for(;g>=0&&g<this.game.board.length&&_>=0&&_<this.game.board[0].length&&this.game.board[g][_]===l;)v++,g+=a*f,_+=F*f}if(v>=4){this.game.winner=l;return}}}resetGame(){this.game={board:[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],currentPlayer:"R",winner:null}}isBoardFull(){return this.game.board.every(e=>e.every(n=>n!==null))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};function Y(t,e){if(t&1){let n=x();o(0,"th")(1,"button",8),h("click",function(){let l=b(n).index,a=s();return w(a.play(l))}),d(2," \u25BC "),i()()}if(t&2){let n=e.index,r=s();u(),M("aria-label",T("Sl\xE4pp bricka i kolumn ",n+1)),c("disabled",r.game.winner||r.isBoardFull())}}function z(t,e){if(t&1){let n=x();o(0,"td",10),h("click",function(){let l=b(n).index,a=s(2);return w(!a.game.winner&&!a.isBoardFull()&&a.play(l))}),S(1,"span",11),i()}if(t&2){let n=e.$implicit;E("r",n==="R")("y",n==="Y"),u(),k("data-cell",n)}}function G(t,e){if(t&1&&(o(0,"tr"),p(1,z,2,5,"td",9),i()),t&2){let n=e.$implicit;u(),c("ngForOf",n)}}function $(t,e){if(t&1&&(o(0,"p"),d(1),i()),t&2){let n=e.ngIf,r=s();u(),I(" ",r.fourInARowService.playerNames[n]," vinner! \u{1F389} ")}}function q(t,e){if(t&1&&(o(0,"p"),d(1),i()),t&2){let n=s(2);u(),I(" N\xE4sta tur: ",n.fourInARowService.playerNames[n.fourInARowService.game.currentPlayer]," ")}}function H(t,e){t&1&&(o(0,"p"),d(1,"Oavgjort!"),i())}function J(t,e){if(t&1&&p(0,q,2,1,"p",6)(1,H,2,0,"ng-template",null,1,y),t&2){let n=C(2),r=s();c("ngIf",!r.isBoardFull())("ngIfElse",n)}}var j=class t{constructor(e){this.fourInARowService=e}four=P(m);get game(){return this.four.game}play(e){this.fourInARowService.dropDisc(e)}reset(){this.fourInARowService.resetGame()}isBoardFull(){return this.game.board.every(e=>e.every(n=>n!==null))}static \u0275fac=function(n){return new(n||t)(O(m))};static \u0275cmp=A({type:t,selectors:[["app-four-in-a-row"]],decls:15,vars:4,consts:[["noWinner",""],["draw",""],[1,"four-in-a-row-container"],["aria-label","Fyra i rad-br\xE4de",1,"four-in-a-row"],[4,"ngFor","ngForOf"],["aria-live","polite",1,"status"],[4,"ngIf","ngIfElse"],["type","button",3,"click"],["type","button",3,"click","disabled","aria-label"],[3,"r","y","click",4,"ngFor","ngForOf"],[3,"click"],[1,"disc"]],template:function(n,r){if(n&1){let l=x();o(0,"div",2)(1,"h1"),d(2,"Fyra i rad"),i(),o(3,"table",3)(4,"thead")(5,"tr"),p(6,Y,3,3,"th",4),i()(),o(7,"tbody"),p(8,G,2,1,"tr",4),i()(),o(9,"div",5),p(10,$,2,1,"p",6)(11,J,3,2,"ng-template",null,0,y),o(13,"button",7),h("click",function(){return b(l),w(r.reset())}),d(14,"Starta om spel"),i()()()}if(n&2){let l=C(12);u(6),c("ngForOf",r.game.board[0]),u(2),c("ngForOf",r.game.board),u(2),c("ngIf",r.game.winner)("ngIfElse",l)}},dependencies:[D,V,N],styles:[".four-in-a-row-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh}.four-in-a-row[_ngcontent-%COMP%]{border-collapse:collapse;margin:24px 0;background:#f8fafc;border-radius:16px;box-shadow:0 4px 24px #0000001a;overflow:hidden}.four-in-a-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .four-in-a-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:48px;height:48px;text-align:center}.four-in-a-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#e9f0f7;border:1px solid #cdd6e0;cursor:pointer;transition:background .2s}.four-in-a-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:hover{background:#dbeafe}.four-in-a-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;background:#2563eb;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:1rem;transition:background .2s}.four-in-a-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#1d4ed8}.disc[_ngcontent-%COMP%]{display:inline-block;width:34px;height:34px;border-radius:50%;background:transparent;box-shadow:0 2px 6px #00000014}td.r[_ngcontent-%COMP%]   .disc[_ngcontent-%COMP%]{background:#d33;box-shadow:0 2px 8px #dc262626}td.y[_ngcontent-%COMP%]   .disc[_ngcontent-%COMP%]{background:#fc3;box-shadow:0 2px 8px #fbbf2426}.status[_ngcontent-%COMP%]{margin-top:16px;font-weight:600;font-size:1.1rem;color:#2563eb;text-align:center}"]})};export{j as FourInARowComponent};
