import{Ab as R,Cb as d,Eb as G,La as v,aa as f,ba as m,mb as l,nb as a,ob as S,qb as M,tb as p,yb as D,za as L,zb as O}from"./chunk-QCNNDH25.js";var j=["screen"],P=class E{score=0;canvas;CELL=20;xVelocity=this.CELL;yVelocity=0;startGameFn=null;changeDirectionButton(r){let o=this.yVelocity===-this.CELL,i=this.yVelocity===this.CELL,n=this.xVelocity===this.CELL,s=this.xVelocity===-this.CELL;switch(r){case"up":i||(this.xVelocity=0,this.yVelocity=-this.CELL);break;case"down":o||(this.xVelocity=0,this.yVelocity=this.CELL);break;case"left":n||(this.xVelocity=-this.CELL,this.yVelocity=0);break;case"right":s||(this.xVelocity=this.CELL,this.yVelocity=0);break}}startGame(){this.startGameFn?.()}ngAfterViewInit(){let r=this.canvas.nativeElement,o=r.clientWidth,i=r.clientHeight,n=window.devicePixelRatio||1;r.width=Math.floor(o*n),r.height=Math.floor(i*n);let s=r.getContext("2d");s.setTransform(n,0,0,n,0,0);let e=20,T=Math.floor(o/e),B=Math.floor(i/e),x=!1,h=250;this.score=0;let c=[{x:e*4,y:0},{x:e*3,y:0},{x:e*2,y:0},{x:e*1,y:0},{x:e*0,y:0}],H=null,g=!1,u=0,k=0,C=()=>{do u=Math.floor(Math.random()*T)*e,k=Math.floor(Math.random()*B)*e;while(c.some(t=>t.x===u&&t.y===k))},F=()=>{s.fillStyle="black";for(let t of c)s.fillRect(t.x,t.y,e,e)},z=()=>{s.fillStyle="red",s.fillRect(u,k,e,e)},A=()=>{let t=c[0];if(t.x<0||t.x>=o||t.y<0||t.y>=i){x=!0;return}for(let y=1;y<c.length;y++)if(c[y].x===t.x&&c[y].y===t.y){x=!0;return}},I=()=>{let t={x:c[0].x+this.xVelocity,y:c[0].y+this.yVelocity};c.unshift(t)},U=t=>{let y=this.yVelocity===-e,V=this.yVelocity===e,b=this.xVelocity===e,w=this.xVelocity===-e;switch(t){case"up":V||(this.xVelocity=0,this.yVelocity=-e);break;case"down":y||(this.xVelocity=0,this.yVelocity=e);break;case"left":b||(this.xVelocity=-e,this.yVelocity=0);break;case"right":w||(this.xVelocity=e,this.yVelocity=0);break}},Q=t=>{let y=this.yVelocity===-e,V=this.yVelocity===e,b=this.xVelocity===e,w=this.xVelocity===-e;switch(t.key.toLowerCase()){case"a":b||(this.xVelocity=-e,this.yVelocity=0);break;case"d":w||(this.xVelocity=e,this.yVelocity=0);break;case"w":V||(this.xVelocity=0,this.yVelocity=-e);break;case"s":y||(this.xVelocity=0,this.yVelocity=e);break}};window.addEventListener("keydown",Q),C();let _=()=>{if(x){g=!1,confirm("Game Over!")&&location.reload();return}A(),s.clearRect(0,0,o,i),s.fillStyle="lightgray",s.fillRect(0,0,o,i),z(),I(),c[0].x===u&&c[0].y===k?(this.score++,C(),this.score>5&&(h=225),this.score>10&&(h=200),this.score>15&&(h=175),this.score>20&&(h=150),this.score>30&&(h=125),this.score>40&&(h=100)):c.pop(),F(),g&&setTimeout(_,h)},W=()=>{g||(g=!0,c=[{x:80,y:0},{x:60,y:0},{x:40,y:0}],this.xVelocity=e,this.yVelocity=0,this.score=0,x=!1,h=250,_())};this.startGameFn=W}static \u0275fac=function(o){return new(o||E)};static \u0275cmp=v({type:E,selectors:[["app-root"]],viewQuery:function(o,i){if(o&1&&D(j,5),o&2){let n;O(n=R())&&(i.canvas=n.first)}},decls:25,vars:1,consts:[["screen",""],["id","container"],["id","score"],[3,"click"],["id","screen"],[1,"controls"],[1,"keys"],[1,"key-row"],[1,"key",3,"click"]],template:function(o,i){if(o&1){let n=M();l(0,"div",1)(1,"h1"),d(2,"Snake Game"),a(),l(3,"h2",2),d(4),a(),l(5,"div")(6,"button",3),p("click",function(){return f(n),m(i.startGame())}),d(7,"Start Game"),a()(),S(8,"canvas",4,0),l(10,"div",5)(11,"p")(12,"b"),d(13,"Kontroller:"),a()(),l(14,"div",6)(15,"div",7)(16,"button",8),p("click",function(){return f(n),m(i.changeDirectionButton("up"))}),d(17,"W"),a()(),l(18,"div",7)(19,"button",8),p("click",function(){return f(n),m(i.changeDirectionButton("left"))}),d(20,"A"),a(),l(21,"button",8),p("click",function(){return f(n),m(i.changeDirectionButton("down"))}),d(22,"S"),a(),l(23,"button",8),p("click",function(){return f(n),m(i.changeDirectionButton("right"))}),d(24,"D"),a()()()()()}o&2&&(L(4),G("Score: ",i.score))},styles:["#container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding-top:50px;background:linear-gradient(135deg,#e0f7fa,#80deea);font-family:Arial,sans-serif;box-sizing:border-box}h1[_ngcontent-%COMP%]{color:#2e7d32;text-shadow:2px 2px 4px rgba(0,0,0,.3);margin-bottom:20px;font-size:2rem}#screen[_ngcontent-%COMP%]{width:400px;height:400px;border:3px solid #1b5e20;border-radius:12px;background-color:#c8e6c9;box-shadow:0 8px 20px #0003}#score[_ngcontent-%COMP%]{margin-top:15px;font-size:20px;color:#1b5e20;font-weight:700;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.controls[_ngcontent-%COMP%]{margin-top:15px;text-align:center;font-family:Arial,sans-serif;color:#2e7d32}.keys[_ngcontent-%COMP%]{display:inline-block}.row[_ngcontent-%COMP%]{display:flex;justify-content:center}.key[_ngcontent-%COMP%]{display:inline-block;margin:5px;padding:20x 28px;border:2px solid #2e7d32;border-radius:6px;background:#f9f9f9;box-shadow:0 3px #2e7d32,0 3px 6px #0000004d;font-weight:700;font-size:22px;min-width:70px;min-height:60px;text-align:center;cursor:default;-webkit-user-select:none;user-select:none}.key-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}"]})};export{P as SnakeComponent};
