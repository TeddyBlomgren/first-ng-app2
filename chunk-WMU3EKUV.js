import{i as V,j as N,l as D}from"./chunk-NPLF357N.js";import"./chunk-FPPZ4BUR.js";import{Cb as y,Fa as P,Ka as m,O as M,T as C,Ua as S,Va as O,Y as w,Z as b,bb as c,cb as r,db as o,eb as k,ib as h,jb as I,lb as s,qb as x,rb as E,sb as d,ua as u,ub as F,yb as T,za as A}from"./chunk-7KW2OLVY.js";var p=class t{game={board:[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],currentPlayer:"R",winner:null};playerNames={R:"Spelare 1",Y:"Spelare 2"};dropDisc(n){if(this.game.winner||n<0||n>=this.game.board[0].length)return!1;for(let e=this.game.board.length-1;e>=0;e--)if(this.game.board[e][n]===null)return this.game.board[e][n]=this.game.currentPlayer,this.checkWinner(e,n),this.game.winner||(this.game.currentPlayer=this.game.currentPlayer==="R"?"Y":"R"),!0;return!1}checkWinner(n,e){let l=[{dr:0,dc:1},{dr:1,dc:0},{dr:1,dc:1},{dr:1,dc:-1}],i=this.game.board[n][e];if(i)for(let{dr:a,dc:R}of l){let v=1;for(let f of[-1,1]){let g=n+a*f,_=e+R*f;for(;g>=0&&g<this.game.board.length&&_>=0&&_<this.game.board[0].length&&this.game.board[g][_]===i;)v++,g+=a*f,_+=R*f}if(v>=4){this.game.winner=i;return}}}resetGame(){this.game={board:[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],currentPlayer:"R",winner:null}}isBoardFull(){return this.game.board.every(n=>n.every(e=>e!==null))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};function Y(t,n){if(t&1){let e=h();r(0,"th")(1,"button",8),I("click",function(){let i=w(e).index,a=s();return b(a.play(i))}),d(2," \u25BC "),o()()}if(t&2){let e=n.index,l=s();u(),S("aria-label",T("Sl\xE4pp bricka i kolumn ",e+1)),c("disabled",l.game.winner||l.isBoardFull())}}function G(t,n){if(t&1){let e=h();r(0,"td",10),I("click",function(){let i=w(e).index,a=s(2);return b(!a.game.winner&&!a.isBoardFull()&&a.play(i))}),k(1,"span",11),o()}if(t&2){let e=n.$implicit;E("r",e==="R")("y",e==="Y"),u(),O("data-cell",e)}}function $(t,n){if(t&1&&(r(0,"tr"),m(1,G,2,5,"td",9),o()),t&2){let e=n.$implicit;u(),c("ngForOf",e)}}function q(t,n){if(t&1&&(r(0,"p"),d(1),o()),t&2){let e=n.ngIf,l=s();u(),F(" ",l.fourInARowService.playerNames[e],` vinner! \u{1F389}
`)}}function z(t,n){if(t&1&&(r(0,"p"),d(1),o()),t&2){let e=s(2);u(),F(" N\xE4sta tur: ",e.fourInARowService.playerNames[e.fourInARowService.game.currentPlayer]," ")}}function H(t,n){t&1&&(r(0,"p"),d(1,"Oavgjort!"),o())}function J(t,n){if(t&1&&m(0,z,2,1,"p",6)(1,H,2,0,"ng-template",null,1,y),t&2){let e=x(2),l=s();c("ngIf",!l.isBoardFull())("ngIfElse",e)}}var B=class t{constructor(n){this.fourInARowService=n}four=C(p);get game(){return this.four.game}play(n){this.fourInARowService.dropDisc(n)}reset(){this.fourInARowService.resetGame()}isBoardFull(){return this.game.board.every(n=>n.every(e=>e!==null))}static \u0275fac=function(e){return new(e||t)(A(p))};static \u0275cmp=P({type:t,selectors:[["app-four-in-a-row"]],decls:15,vars:4,consts:[["noWinner",""],["draw",""],["id","container"],["aria-label","Fyra i rad-br\xE4de",1,"four-in-a-row"],[4,"ngFor","ngForOf"],["aria-live","polite",1,"status"],[4,"ngIf","ngIfElse"],["type","button",3,"click"],["type","button",3,"click","disabled","aria-label"],[3,"r","y","click",4,"ngFor","ngForOf"],[3,"click"],[1,"disc"]],template:function(e,l){if(e&1){let i=h();r(0,"div",2)(1,"h1"),d(2,"Fyra i rad"),o(),r(3,"table",3)(4,"thead")(5,"tr"),m(6,Y,3,3,"th",4),o()(),r(7,"tbody"),m(8,$,2,1,"tr",4),o()(),r(9,"div",5),m(10,q,2,1,"p",6)(11,J,3,2,"ng-template",null,0,y),r(13,"button",7),I("click",function(){return w(i),b(l.reset())}),d(14,"Starta om spel"),o()()()}if(e&2){let i=x(12);u(6),c("ngForOf",l.game.board[0]),u(2),c("ngForOf",l.game.board),u(2),c("ngIf",l.game.winner)("ngIfElse",i)}},dependencies:[D,V,N],styles:[".four-in-a-row[_ngcontent-%COMP%]{border-collapse:collapse;margin:12px 0}.four-in-a-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .four-in-a-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:48px;height:48px;text-align:center}.four-in-a-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#e9f0f7;border:1px solid #cdd6e0;cursor:pointer}.four-in-a-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.disc[_ngcontent-%COMP%]{display:inline-block;width:34px;height:34px;border-radius:50%;background:transparent}td.r[_ngcontent-%COMP%]   .disc[_ngcontent-%COMP%]{background:#d33}td.y[_ngcontent-%COMP%]   .disc[_ngcontent-%COMP%]{background:#fc3}.status[_ngcontent-%COMP%]{margin-top:12px;font-weight:600}"]})};export{B as FourInARowModel};
